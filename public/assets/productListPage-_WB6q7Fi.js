import{u,j as e,r as n}from"./index-BzRYe7T0.js";import{T as h,a as x,b as d,c as i,d as f,e as a}from"./table-B8AocDf4.js";import{g as j,q as g,c as m,d as p,a as b}from"./firebase-DMO3EB_U.js";import{c as S}from"./firebaseFunctions-B7adSngD.js";import{B as y}from"./button-cc73kDZo.js";import"./index.esm2017-BAAKErde.js";function P({products:t}){const c=u(),o=r=>{console.log(r),c(`${r}`)};return e.jsxs(h,{children:[e.jsx(x,{children:e.jsxs(d,{children:[e.jsx(i,{children:"카테고리"}),e.jsx(i,{children:"이름"}),e.jsx(i,{children:"수량"}),e.jsx(i,{children:"가격"})]})}),e.jsx(f,{children:t.map(r=>{var l;return e.jsxs(d,{onClick:()=>{var s;return o(((s=r.id)==null?void 0:s.toString())??"")},children:[e.jsx(a,{children:r.productCategory}),e.jsx(a,{onClick:()=>{var s;return o(((s=r.id)==null?void 0:s.toString())??"")},children:r.productName}),e.jsx(a,{children:r.productQuantity}),e.jsx(a,{children:r.productPrice})]},((l=r.id)==null?void 0:l.toString())??"")})})]})}const T=async()=>{try{const t=await j(g(m(p,"PRODUCT")));if(console.log(t),t.empty)return[];const c=[];return t.forEach(o=>{c.push({id:o.id,...o.data()})}),c}catch(t){throw console.error("Error getting product: ",t),t}},C=T;function B(){const[t,c]=n.useState([]),[o,r]=n.useState(!1),l=u();return n.useEffect(()=>{C().then(s=>{s&&(console.log(s),c(s))})},[]),n.useEffect(()=>{!o||b.currentUser===null||S().then(s=>{r(s)})},[o]),e.jsxs("div",{className:"flex flex-col w-full h-full box-border",children:[e.jsx("div",{className:"flex-grow",children:e.jsx(P,{products:t})}),o&&e.jsxs("div",{children:[e.jsx("h2",{children:"판매자 전용 기능"}),e.jsx(y,{onClick:()=>l("/product/register"),children:"상품 등록"})]})]})}export{B as default};
