import{r as _,j as d,c as gt,R as y}from"./index-BzRYe7T0.js";import{_ as p,c as Et,B as L}from"./button-cc73kDZo.js";import{$ as xt}from"./index-B17J8msL.js";import{T as wt,a as Qt,b as J,c as P,d as Ft,e as M}from"./table-B8AocDf4.js";import{a as it,u as Pt,b as Mt}from"./firebaseFunctions-B7adSngD.js";import{a as st}from"./firebase-DMO3EB_U.js";const $="horizontal",Tt=["horizontal","vertical"],ut=_.forwardRef((e,t)=>{const{decorative:i,orientation:n=$,...s}=e,r=ot(n)?n:$,u=i?{role:"none"}:{"aria-orientation":r==="vertical"?r:void 0,role:"separator"};return _.createElement(xt.div,p({"data-orientation":r},u,s,{ref:t}))});ut.propTypes={orientation(e,t,i){const n=e[t],s=String(n);return n&&!ot(n)?new Error(It(s,i)):null}};function It(e,t){return`Invalid prop \`orientation\` of value \`${e}\` supplied to \`${t}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${$}\`.`}function ot(e){return Tt.includes(e)}const at=ut,ct=_.forwardRef(({className:e,orientation:t="horizontal",decorative:i=!0,...n},s)=>d.jsx(at,{ref:s,decorative:i,orientation:t,className:Et("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));ct.displayName=at.displayName;function A(e,t){return A=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},A(e,t)}function j(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,A(e,t)}var U=function(){function e(){this.listeners=[]}var t=e.prototype;return t.subscribe=function(n){var s=this,r=n||function(){};return this.listeners.push(r),this.onSubscribe(),function(){s.listeners=s.listeners.filter(function(o){return o!==r}),s.onUnsubscribe()}},t.hasListeners=function(){return this.listeners.length>0},t.onSubscribe=function(){},t.onUnsubscribe=function(){},e}(),T=typeof window>"u";function I(){}function de(e,t){return typeof e=="function"?e(t):e}function G(e){return typeof e=="number"&&e>=0&&e!==1/0}function N(e){return Array.isArray(e)?e:[e]}function jt(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Ut(e,t,i){return Q(e)?typeof t=="function"?p({},i,{queryKey:e,queryFn:t}):p({},t,{queryKey:e}):e}function Lt(e,t,i){return Q(e)?typeof t=="function"?p({},i,{mutationKey:e,mutationFn:t}):p({},t,{mutationKey:e}):typeof e=="function"?p({},t,{mutationFn:e}):p({},e)}function ve(e,t,i){return Q(e)?[p({},t,{queryKey:e}),i]:[e||{},t]}function _t(e,t){if(e===!0&&t===!0||e==null&&t==null)return"all";if(e===!1&&t===!1)return"none";var i=e??!t;return i?"active":"inactive"}function pe(e,t){var i=e.active,n=e.exact,s=e.fetching,r=e.inactive,o=e.predicate,u=e.queryKey,c=e.stale;if(Q(u)){if(n){if(t.queryHash!==$t(u,t.options))return!1}else if(!lt(t.queryKey,u))return!1}var a=_t(i,r);if(a==="none")return!1;if(a!=="all"){var f=t.isActive();if(a==="active"&&!f||a==="inactive"&&f)return!1}return!(typeof c=="boolean"&&t.isStale()!==c||typeof s=="boolean"&&t.isFetching()!==s||o&&!o(t))}function ye(e,t){var i=e.exact,n=e.fetching,s=e.predicate,r=e.mutationKey;if(Q(r)){if(!t.options.mutationKey)return!1;if(i){if(K(t.options.mutationKey)!==K(r))return!1}else if(!lt(t.options.mutationKey,r))return!1}return!(typeof n=="boolean"&&t.state.status==="loading"!==n||s&&!s(t))}function $t(e,t){var i=(t==null?void 0:t.queryKeyHashFn)||K;return i(e)}function K(e){var t=N(e);return At(t)}function At(e){return JSON.stringify(e,function(t,i){return q(i)?Object.keys(i).sort().reduce(function(n,s){return n[s]=i[s],n},{}):i})}function lt(e,t){return ft(N(e),N(t))}function ft(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(function(i){return!ft(e[i],t[i])}):!1}function D(e,t){if(e===t)return e;var i=Array.isArray(e)&&Array.isArray(t);if(i||q(e)&&q(t)){for(var n=i?e.length:Object.keys(e).length,s=i?t:Object.keys(t),r=s.length,o=i?[]:{},u=0,c=0;c<r;c++){var a=i?c:s[c];o[a]=D(e[a],t[a]),o[a]===e[a]&&u++}return n===r&&u===n?e:o}return t}function Nt(e,t){if(e&&!t||t&&!e)return!1;for(var i in e)if(e[i]!==t[i])return!1;return!0}function q(e){if(!X(e))return!1;var t=e.constructor;if(typeof t>"u")return!0;var i=t.prototype;return!(!X(i)||!i.hasOwnProperty("isPrototypeOf"))}function X(e){return Object.prototype.toString.call(e)==="[object Object]"}function Q(e){return typeof e=="string"||Array.isArray(e)}function Kt(e){return new Promise(function(t){setTimeout(t,e)})}function Y(e){Promise.resolve().then(e).catch(function(t){return setTimeout(function(){throw t})})}function be(){if(typeof AbortController=="function")return new AbortController}var Dt=function(e){j(t,e);function t(){var n;return n=e.call(this)||this,n.setup=function(s){var r;if(!T&&((r=window)!=null&&r.addEventListener)){var o=function(){return s()};return window.addEventListener("visibilitychange",o,!1),window.addEventListener("focus",o,!1),function(){window.removeEventListener("visibilitychange",o),window.removeEventListener("focus",o)}}},n}var i=t.prototype;return i.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},i.onUnsubscribe=function(){if(!this.hasListeners()){var s;(s=this.cleanup)==null||s.call(this),this.cleanup=void 0}},i.setEventListener=function(s){var r,o=this;this.setup=s,(r=this.cleanup)==null||r.call(this),this.cleanup=s(function(u){typeof u=="boolean"?o.setFocused(u):o.onFocus()})},i.setFocused=function(s){this.focused=s,s&&this.onFocus()},i.onFocus=function(){this.listeners.forEach(function(s){s()})},i.isFocused=function(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)},t}(U),ht=new Dt,qt=function(e){j(t,e);function t(){var n;return n=e.call(this)||this,n.setup=function(s){var r;if(!T&&((r=window)!=null&&r.addEventListener)){var o=function(){return s()};return window.addEventListener("online",o,!1),window.addEventListener("offline",o,!1),function(){window.removeEventListener("online",o),window.removeEventListener("offline",o)}}},n}var i=t.prototype;return i.onSubscribe=function(){this.cleanup||this.setEventListener(this.setup)},i.onUnsubscribe=function(){if(!this.hasListeners()){var s;(s=this.cleanup)==null||s.call(this),this.cleanup=void 0}},i.setEventListener=function(s){var r,o=this;this.setup=s,(r=this.cleanup)==null||r.call(this),this.cleanup=s(function(u){typeof u=="boolean"?o.setOnline(u):o.onOnline()})},i.setOnline=function(s){this.online=s,s&&this.onOnline()},i.onOnline=function(){this.listeners.forEach(function(s){s()})},i.isOnline=function(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine},t}(U),Bt=new qt;function kt(e){return Math.min(1e3*Math.pow(2,e),3e4)}function Z(e){return typeof(e==null?void 0:e.cancel)=="function"}var dt=function(t){this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent};function Vt(e){return e instanceof dt}var Ht=function(t){var i=this,n=!1,s,r,o,u;this.abort=t.abort,this.cancel=function(v){return s==null?void 0:s(v)},this.cancelRetry=function(){n=!0},this.continueRetry=function(){n=!1},this.continue=function(){return r==null?void 0:r()},this.failureCount=0,this.isPaused=!1,this.isResolved=!1,this.isTransportCancelable=!1,this.promise=new Promise(function(v,h){o=v,u=h});var c=function(h){i.isResolved||(i.isResolved=!0,t.onSuccess==null||t.onSuccess(h),r==null||r(),o(h))},a=function(h){i.isResolved||(i.isResolved=!0,t.onError==null||t.onError(h),r==null||r(),u(h))},f=function(){return new Promise(function(h){r=h,i.isPaused=!0,t.onPause==null||t.onPause()}).then(function(){r=void 0,i.isPaused=!1,t.onContinue==null||t.onContinue()})},b=function v(){if(!i.isResolved){var h;try{h=t.fn()}catch(l){h=Promise.reject(l)}s=function(R){if(!i.isResolved&&(a(new dt(R)),i.abort==null||i.abort(),Z(h)))try{h.cancel()}catch{}},i.isTransportCancelable=Z(h),Promise.resolve(h).then(c).catch(function(l){var R,x;if(!i.isResolved){var g=(R=t.retry)!=null?R:3,E=(x=t.retryDelay)!=null?x:kt,m=typeof E=="function"?E(i.failureCount,l):E,F=g===!0||typeof g=="number"&&i.failureCount<g||typeof g=="function"&&g(i.failureCount,l);if(n||!F){a(l);return}i.failureCount++,t.onFail==null||t.onFail(i.failureCount,l),Kt(m).then(function(){if(!ht.isFocused()||!Bt.isOnline())return f()}).then(function(){n?a(l):v()})}})}};b()},zt=function(){function e(){this.queue=[],this.transactions=0,this.notifyFn=function(i){i()},this.batchNotifyFn=function(i){i()}}var t=e.prototype;return t.batch=function(n){var s;this.transactions++;try{s=n()}finally{this.transactions--,this.transactions||this.flush()}return s},t.schedule=function(n){var s=this;this.transactions?this.queue.push(n):Y(function(){s.notifyFn(n)})},t.batchCalls=function(n){var s=this;return function(){for(var r=arguments.length,o=new Array(r),u=0;u<r;u++)o[u]=arguments[u];s.schedule(function(){n.apply(void 0,o)})}},t.flush=function(){var n=this,s=this.queue;this.queue=[],s.length&&Y(function(){n.batchNotifyFn(function(){s.forEach(function(r){n.notifyFn(r)})})})},t.setNotifyFunction=function(n){this.notifyFn=n},t.setBatchNotifyFunction=function(n){this.batchNotifyFn=n},e}(),S=new zt,vt=console;function B(){return vt}function Wt(e){vt=e}var me=function(){function e(i){this.options=p({},i.defaultOptions,i.options),this.mutationId=i.mutationId,this.mutationCache=i.mutationCache,this.observers=[],this.state=i.state||pt(),this.meta=i.meta}var t=e.prototype;return t.setState=function(n){this.dispatch({type:"setState",state:n})},t.addObserver=function(n){this.observers.indexOf(n)===-1&&this.observers.push(n)},t.removeObserver=function(n){this.observers=this.observers.filter(function(s){return s!==n})},t.cancel=function(){return this.retryer?(this.retryer.cancel(),this.retryer.promise.then(I).catch(I)):Promise.resolve()},t.continue=function(){return this.retryer?(this.retryer.continue(),this.retryer.promise):this.execute()},t.execute=function(){var n=this,s,r=this.state.status==="loading",o=Promise.resolve();return r||(this.dispatch({type:"loading",variables:this.options.variables}),o=o.then(function(){n.mutationCache.config.onMutate==null||n.mutationCache.config.onMutate(n.state.variables,n)}).then(function(){return n.options.onMutate==null?void 0:n.options.onMutate(n.state.variables)}).then(function(u){u!==n.state.context&&n.dispatch({type:"loading",context:u,variables:n.state.variables})})),o.then(function(){return n.executeMutation()}).then(function(u){s=u,n.mutationCache.config.onSuccess==null||n.mutationCache.config.onSuccess(s,n.state.variables,n.state.context,n)}).then(function(){return n.options.onSuccess==null?void 0:n.options.onSuccess(s,n.state.variables,n.state.context)}).then(function(){return n.options.onSettled==null?void 0:n.options.onSettled(s,null,n.state.variables,n.state.context)}).then(function(){return n.dispatch({type:"success",data:s}),s}).catch(function(u){return n.mutationCache.config.onError==null||n.mutationCache.config.onError(u,n.state.variables,n.state.context,n),B().error(u),Promise.resolve().then(function(){return n.options.onError==null?void 0:n.options.onError(u,n.state.variables,n.state.context)}).then(function(){return n.options.onSettled==null?void 0:n.options.onSettled(void 0,u,n.state.variables,n.state.context)}).then(function(){throw n.dispatch({type:"error",error:u}),u})})},t.executeMutation=function(){var n=this,s;return this.retryer=new Ht({fn:function(){return n.options.mutationFn?n.options.mutationFn(n.state.variables):Promise.reject("No mutationFn found")},onFail:function(){n.dispatch({type:"failed"})},onPause:function(){n.dispatch({type:"pause"})},onContinue:function(){n.dispatch({type:"continue"})},retry:(s=this.options.retry)!=null?s:0,retryDelay:this.options.retryDelay}),this.retryer.promise},t.dispatch=function(n){var s=this;this.state=Jt(this.state,n),S.batch(function(){s.observers.forEach(function(r){r.onMutationUpdate(n)}),s.mutationCache.notify(s)})},e}();function pt(){return{context:void 0,data:void 0,error:null,failureCount:0,isPaused:!1,status:"idle",variables:void 0}}function Jt(e,t){switch(t.type){case"failed":return p({},e,{failureCount:e.failureCount+1});case"pause":return p({},e,{isPaused:!0});case"continue":return p({},e,{isPaused:!1});case"loading":return p({},e,{context:t.context,data:void 0,error:null,isPaused:!1,status:"loading",variables:t.variables});case"success":return p({},e,{data:t.data,error:null,status:"success",isPaused:!1});case"error":return p({},e,{data:void 0,error:t.error,failureCount:e.failureCount+1,isPaused:!1,status:"error"});case"setState":return p({},e,t.state);default:return e}}var Gt=function(e){j(t,e);function t(n,s){var r;return r=e.call(this)||this,r.client=n,r.options=s,r.trackedProps=[],r.selectError=null,r.bindMethods(),r.setOptions(s),r}var i=t.prototype;return i.bindMethods=function(){this.remove=this.remove.bind(this),this.refetch=this.refetch.bind(this)},i.onSubscribe=function(){this.listeners.length===1&&(this.currentQuery.addObserver(this),tt(this.currentQuery,this.options)&&this.executeFetch(),this.updateTimers())},i.onUnsubscribe=function(){this.listeners.length||this.destroy()},i.shouldFetchOnReconnect=function(){return k(this.currentQuery,this.options,this.options.refetchOnReconnect)},i.shouldFetchOnWindowFocus=function(){return k(this.currentQuery,this.options,this.options.refetchOnWindowFocus)},i.destroy=function(){this.listeners=[],this.clearTimers(),this.currentQuery.removeObserver(this)},i.setOptions=function(s,r){var o=this.options,u=this.currentQuery;if(this.options=this.client.defaultQueryObserverOptions(s),typeof this.options.enabled<"u"&&typeof this.options.enabled!="boolean")throw new Error("Expected enabled to be a boolean");this.options.queryKey||(this.options.queryKey=o.queryKey),this.updateQuery();var c=this.hasListeners();c&&et(this.currentQuery,u,this.options,o)&&this.executeFetch(),this.updateResult(r),c&&(this.currentQuery!==u||this.options.enabled!==o.enabled||this.options.staleTime!==o.staleTime)&&this.updateStaleTimeout();var a=this.computeRefetchInterval();c&&(this.currentQuery!==u||this.options.enabled!==o.enabled||a!==this.currentRefetchInterval)&&this.updateRefetchInterval(a)},i.getOptimisticResult=function(s){var r=this.client.defaultQueryObserverOptions(s),o=this.client.getQueryCache().build(this.client,r);return this.createResult(o,r)},i.getCurrentResult=function(){return this.currentResult},i.trackResult=function(s,r){var o=this,u={},c=function(f){o.trackedProps.includes(f)||o.trackedProps.push(f)};return Object.keys(s).forEach(function(a){Object.defineProperty(u,a,{configurable:!1,enumerable:!0,get:function(){return c(a),s[a]}})}),(r.useErrorBoundary||r.suspense)&&c("error"),u},i.getNextResult=function(s){var r=this;return new Promise(function(o,u){var c=r.subscribe(function(a){a.isFetching||(c(),a.isError&&(s!=null&&s.throwOnError)?u(a.error):o(a))})})},i.getCurrentQuery=function(){return this.currentQuery},i.remove=function(){this.client.getQueryCache().remove(this.currentQuery)},i.refetch=function(s){return this.fetch(p({},s,{meta:{refetchPage:s==null?void 0:s.refetchPage}}))},i.fetchOptimistic=function(s){var r=this,o=this.client.defaultQueryObserverOptions(s),u=this.client.getQueryCache().build(this.client,o);return u.fetch().then(function(){return r.createResult(u,o)})},i.fetch=function(s){var r=this;return this.executeFetch(s).then(function(){return r.updateResult(),r.currentResult})},i.executeFetch=function(s){this.updateQuery();var r=this.currentQuery.fetch(this.options,s);return s!=null&&s.throwOnError||(r=r.catch(I)),r},i.updateStaleTimeout=function(){var s=this;if(this.clearStaleTimeout(),!(T||this.currentResult.isStale||!G(this.options.staleTime))){var r=jt(this.currentResult.dataUpdatedAt,this.options.staleTime),o=r+1;this.staleTimeoutId=setTimeout(function(){s.currentResult.isStale||s.updateResult()},o)}},i.computeRefetchInterval=function(){var s;return typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.currentResult.data,this.currentQuery):(s=this.options.refetchInterval)!=null?s:!1},i.updateRefetchInterval=function(s){var r=this;this.clearRefetchInterval(),this.currentRefetchInterval=s,!(T||this.options.enabled===!1||!G(this.currentRefetchInterval)||this.currentRefetchInterval===0)&&(this.refetchIntervalId=setInterval(function(){(r.options.refetchIntervalInBackground||ht.isFocused())&&r.executeFetch()},this.currentRefetchInterval))},i.updateTimers=function(){this.updateStaleTimeout(),this.updateRefetchInterval(this.computeRefetchInterval())},i.clearTimers=function(){this.clearStaleTimeout(),this.clearRefetchInterval()},i.clearStaleTimeout=function(){this.staleTimeoutId&&(clearTimeout(this.staleTimeoutId),this.staleTimeoutId=void 0)},i.clearRefetchInterval=function(){this.refetchIntervalId&&(clearInterval(this.refetchIntervalId),this.refetchIntervalId=void 0)},i.createResult=function(s,r){var o=this.currentQuery,u=this.options,c=this.currentResult,a=this.currentResultState,f=this.currentResultOptions,b=s!==o,v=b?s.state:this.currentQueryInitialState,h=b?this.currentResult:this.previousQueryResult,l=s.state,R=l.dataUpdatedAt,x=l.error,g=l.errorUpdatedAt,E=l.isFetching,m=l.status,F=!1,z=!1,O;if(r.optimisticResults){var W=this.hasListeners(),Ot=!W&&tt(s,r),Ct=W&&et(s,o,r,u);(Ot||Ct)&&(E=!0,R||(m="loading"))}if(r.keepPreviousData&&!l.dataUpdateCount&&(h!=null&&h.isSuccess)&&m!=="error")O=h.data,R=h.dataUpdatedAt,m=h.status,F=!0;else if(r.select&&typeof l.data<"u")if(c&&l.data===(a==null?void 0:a.data)&&r.select===this.selectFn)O=this.selectResult;else try{this.selectFn=r.select,O=r.select(l.data),r.structuralSharing!==!1&&(O=D(c==null?void 0:c.data,O)),this.selectResult=O,this.selectError=null}catch(w){B().error(w),this.selectError=w}else O=l.data;if(typeof r.placeholderData<"u"&&typeof O>"u"&&(m==="loading"||m==="idle")){var C;if(c!=null&&c.isPlaceholderData&&r.placeholderData===(f==null?void 0:f.placeholderData))C=c.data;else if(C=typeof r.placeholderData=="function"?r.placeholderData():r.placeholderData,r.select&&typeof C<"u")try{C=r.select(C),r.structuralSharing!==!1&&(C=D(c==null?void 0:c.data,C)),this.selectError=null}catch(w){B().error(w),this.selectError=w}typeof C<"u"&&(m="success",O=C,z=!0)}this.selectError&&(x=this.selectError,O=this.selectResult,g=Date.now(),m="error");var St={status:m,isLoading:m==="loading",isSuccess:m==="success",isError:m==="error",isIdle:m==="idle",data:O,dataUpdatedAt:R,error:x,errorUpdatedAt:g,failureCount:l.fetchFailureCount,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>v.dataUpdateCount||l.errorUpdateCount>v.errorUpdateCount,isFetching:E,isRefetching:E&&m!=="loading",isLoadingError:m==="error"&&l.dataUpdatedAt===0,isPlaceholderData:z,isPreviousData:F,isRefetchError:m==="error"&&l.dataUpdatedAt!==0,isStale:V(s,r),refetch:this.refetch,remove:this.remove};return St},i.shouldNotifyListeners=function(s,r){if(!r)return!0;var o=this.options,u=o.notifyOnChangeProps,c=o.notifyOnChangePropsExclusions;if(!u&&!c||u==="tracked"&&!this.trackedProps.length)return!0;var a=u==="tracked"?this.trackedProps:u;return Object.keys(s).some(function(f){var b=f,v=s[b]!==r[b],h=a==null?void 0:a.some(function(R){return R===f}),l=c==null?void 0:c.some(function(R){return R===f});return v&&!l&&(!a||h)})},i.updateResult=function(s){var r=this.currentResult;if(this.currentResult=this.createResult(this.currentQuery,this.options),this.currentResultState=this.currentQuery.state,this.currentResultOptions=this.options,!Nt(this.currentResult,r)){var o={cache:!0};(s==null?void 0:s.listeners)!==!1&&this.shouldNotifyListeners(this.currentResult,r)&&(o.listeners=!0),this.notify(p({},o,s))}},i.updateQuery=function(){var s=this.client.getQueryCache().build(this.client,this.options);if(s!==this.currentQuery){var r=this.currentQuery;this.currentQuery=s,this.currentQueryInitialState=s.state,this.previousQueryResult=this.currentResult,this.hasListeners()&&(r==null||r.removeObserver(this),s.addObserver(this))}},i.onQueryUpdate=function(s){var r={};s.type==="success"?r.onSuccess=!0:s.type==="error"&&!Vt(s.error)&&(r.onError=!0),this.updateResult(r),this.hasListeners()&&this.updateTimers()},i.notify=function(s){var r=this;S.batch(function(){s.onSuccess?(r.options.onSuccess==null||r.options.onSuccess(r.currentResult.data),r.options.onSettled==null||r.options.onSettled(r.currentResult.data,null)):s.onError&&(r.options.onError==null||r.options.onError(r.currentResult.error),r.options.onSettled==null||r.options.onSettled(void 0,r.currentResult.error)),s.listeners&&r.listeners.forEach(function(o){o(r.currentResult)}),s.cache&&r.client.getQueryCache().notify({query:r.currentQuery,type:"observerResultsUpdated"})})},t}(U);function Xt(e,t){return t.enabled!==!1&&!e.state.dataUpdatedAt&&!(e.state.status==="error"&&t.retryOnMount===!1)}function tt(e,t){return Xt(e,t)||e.state.dataUpdatedAt>0&&k(e,t,t.refetchOnMount)}function k(e,t,i){if(t.enabled!==!1){var n=typeof i=="function"?i(e):i;return n==="always"||n!==!1&&V(e,t)}return!1}function et(e,t,i,n){return i.enabled!==!1&&(e!==t||n.enabled===!1)&&(!i.suspense||e.state.status!=="error")&&V(e,i)}function V(e,t){return e.isStaleByTime(t.staleTime)}var Yt=function(e){j(t,e);function t(n,s){var r;return r=e.call(this)||this,r.client=n,r.setOptions(s),r.bindMethods(),r.updateResult(),r}var i=t.prototype;return i.bindMethods=function(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)},i.setOptions=function(s){this.options=this.client.defaultMutationOptions(s)},i.onUnsubscribe=function(){if(!this.listeners.length){var s;(s=this.currentMutation)==null||s.removeObserver(this)}},i.onMutationUpdate=function(s){this.updateResult();var r={listeners:!0};s.type==="success"?r.onSuccess=!0:s.type==="error"&&(r.onError=!0),this.notify(r)},i.getCurrentResult=function(){return this.currentResult},i.reset=function(){this.currentMutation=void 0,this.updateResult(),this.notify({listeners:!0})},i.mutate=function(s,r){return this.mutateOptions=r,this.currentMutation&&this.currentMutation.removeObserver(this),this.currentMutation=this.client.getMutationCache().build(this.client,p({},this.options,{variables:typeof s<"u"?s:this.options.variables})),this.currentMutation.addObserver(this),this.currentMutation.execute()},i.updateResult=function(){var s=this.currentMutation?this.currentMutation.state:pt(),r=p({},s,{isLoading:s.status==="loading",isSuccess:s.status==="success",isError:s.status==="error",isIdle:s.status==="idle",mutate:this.mutate,reset:this.reset});this.currentResult=r},i.notify=function(s){var r=this;S.batch(function(){r.mutateOptions&&(s.onSuccess?(r.mutateOptions.onSuccess==null||r.mutateOptions.onSuccess(r.currentResult.data,r.currentResult.variables,r.currentResult.context),r.mutateOptions.onSettled==null||r.mutateOptions.onSettled(r.currentResult.data,null,r.currentResult.variables,r.currentResult.context)):s.onError&&(r.mutateOptions.onError==null||r.mutateOptions.onError(r.currentResult.error,r.currentResult.variables,r.currentResult.context),r.mutateOptions.onSettled==null||r.mutateOptions.onSettled(void 0,r.currentResult.error,r.currentResult.variables,r.currentResult.context))),s.listeners&&r.listeners.forEach(function(o){o(r.currentResult)})})},t}(U),Zt=gt.unstable_batchedUpdates;S.setBatchNotifyFunction(Zt);var te=console;Wt(te);var nt=y.createContext(void 0),yt=y.createContext(!1);function bt(e){return e&&typeof window<"u"?(window.ReactQueryClientContext||(window.ReactQueryClientContext=nt),window.ReactQueryClientContext):nt}var H=function(){var t=y.useContext(bt(y.useContext(yt)));if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Re=function(t){var i=t.client,n=t.contextSharing,s=n===void 0?!1:n,r=t.children;y.useEffect(function(){return i.mount(),function(){i.unmount()}},[i]);var o=bt(s);return y.createElement(yt.Provider,{value:s},y.createElement(o.Provider,{value:i},r))};function ee(){var e=!1;return{clearReset:function(){e=!1},reset:function(){e=!0},isReset:function(){return e}}}var ne=y.createContext(ee()),re=function(){return y.useContext(ne)};function mt(e,t,i){return typeof t=="function"?t.apply(void 0,i):typeof t=="boolean"?t:!!e}function rt(e,t,i){var n=y.useRef(!1),s=y.useState(0),r=s[1],o=Lt(e,t,i),u=H(),c=y.useRef();c.current?c.current.setOptions(o):c.current=new Yt(u,o);var a=c.current.getCurrentResult();y.useEffect(function(){n.current=!0;var b=c.current.subscribe(S.batchCalls(function(){n.current&&r(function(v){return v+1})}));return function(){n.current=!1,b()}},[]);var f=y.useCallback(function(b,v){c.current.mutate(b,v).catch(I)},[]);if(a.error&&mt(void 0,c.current.options.useErrorBoundary,[a.error]))throw a.error;return p({},a,{mutate:f,mutateAsync:a.mutate})}function ie(e,t){var i=y.useRef(!1),n=y.useState(0),s=n[1],r=H(),o=re(),u=r.defaultQueryObserverOptions(e);u.optimisticResults=!0,u.onError&&(u.onError=S.batchCalls(u.onError)),u.onSuccess&&(u.onSuccess=S.batchCalls(u.onSuccess)),u.onSettled&&(u.onSettled=S.batchCalls(u.onSettled)),u.suspense&&(typeof u.staleTime!="number"&&(u.staleTime=1e3),u.cacheTime===0&&(u.cacheTime=1)),(u.suspense||u.useErrorBoundary)&&(o.isReset()||(u.retryOnMount=!1));var c=y.useState(function(){return new t(r,u)}),a=c[0],f=a.getOptimisticResult(u);if(y.useEffect(function(){i.current=!0,o.clearReset();var b=a.subscribe(S.batchCalls(function(){i.current&&s(function(v){return v+1})}));return a.updateResult(),function(){i.current=!1,b()}},[o,a]),y.useEffect(function(){a.setOptions(u,{listeners:!1})},[u,a]),u.suspense&&f.isLoading)throw a.fetchOptimistic(u).then(function(b){var v=b.data;u.onSuccess==null||u.onSuccess(v),u.onSettled==null||u.onSettled(v,null)}).catch(function(b){o.clearReset(),u.onError==null||u.onError(b),u.onSettled==null||u.onSettled(void 0,b)});if(f.isError&&!o.isReset()&&!f.isFetching&&mt(u.suspense,u.useErrorBoundary,[f.error,a.getCurrentQuery()]))throw f.error;return u.notifyOnChangeProps==="tracked"&&(f=a.trackResult(f,u)),f}function Rt(e,t,i){var n=Ut(e,t,i);return ie(n,Gt)}const se=()=>{const e=H(),{data:t,refetch:i}=Rt("shoppingList",()=>{var u;return it(((u=st.currentUser)==null?void 0:u.uid)||"")}),n=rt(u=>Pt(u.id,u.delta)),s=rt(Mt),r=(u,c)=>{console.log("handleQuantityChange called with id:",u,"and delta:",c),n.mutate({id:u,delta:c},{onSuccess:()=>{console.log("onSuccess called"),i()},onError:a=>{console.log("onError called"),console.error(a)}})},o=u=>{s.mutate(u,{onSuccess:()=>{e.invalidateQueries("shoppingList")}})};return d.jsxs(wt,{children:[d.jsx(Qt,{children:d.jsxs(J,{children:[d.jsx(P,{children:"상품명"}),d.jsx(P,{children:"수량"}),d.jsx(P,{children:"가격"}),location.pathname==="/payment"?null:d.jsx(P,{children:"삭제"})]})}),d.jsx(Ft,{children:t==null?void 0:t.map(u=>d.jsxs(J,{children:[d.jsx(M,{children:u.productName}),d.jsx(M,{children:location.pathname==="/payment"?u.quantity:d.jsxs(d.Fragment,{children:[d.jsx(L,{onClick:()=>u.id&&r(u.id.toString(),-1),children:"-"}),u.quantity,d.jsx(L,{onClick:()=>u.id&&r(u.id.toString(),1),children:"+"})]})}),d.jsx(M,{children:u.productPrice*u.quantity}),location.pathname==="/payment"?null:d.jsx(M,{children:d.jsx(L,{variant:"destructive",onClick:()=>u.id&&o(u.id.toString()),children:"삭제"})})]},u.id))})]})},ue=y.memo(se);function Oe(){const{data:e=[]}=Rt("shoppingList",()=>{var i;return it(((i=st.currentUser)==null?void 0:i.uid)||"")}),t=e.reduce((i,n)=>i+n.productPrice*n.quantity,0);return d.jsxs(y.Fragment,{children:[e.length>0?d.jsx(ue,{}):d.jsx("div",{children:"상품이 없습니다"}),d.jsx(ct,{}),t&&d.jsxs("div",{children:["총 가격:",t,"원"]})]})}export{me as M,Oe as P,Re as Q,Ht as R,U as S,j as _,Vt as a,B as b,S as c,ye as d,N as e,de as f,be as g,$t as h,G as i,Z as j,ht as k,Ut as l,pe as m,I as n,Bt as o,ve as p,K as q,D as r,lt as s,jt as t,Rt as u};
